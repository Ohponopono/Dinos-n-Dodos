#Detect if the firework entity is placed near a chest and move it
execute as @s[nbt={FireworksItem:{id:"minecraft:firework_rocket",tag:{CustomModelData:8,CustomBlock0:1b}}}] at @s unless block ~ ~ ~ air if block ~0.15 ~ ~ air run tp @s ~0.6 ~ ~
execute as @s[nbt={FireworksItem:{id:"minecraft:firework_rocket",tag:{CustomModelData:8,CustomBlock0:1b}}}] at @s unless block ~ ~ ~ air if block ~-0.15 ~ ~ air run tp @s ~-0.6 ~ ~
execute as @s[nbt={FireworksItem:{id:"minecraft:firework_rocket",tag:{CustomModelData:8,CustomBlock0:1b}}}] at @s unless block ~ ~ ~ air if block ~ ~ ~-0.15 air run tp @s ~ ~ ~-0.6
execute as @s[nbt={FireworksItem:{id:"minecraft:firework_rocket",tag:{CustomModelData:8,CustomBlock0:1b}}}] at @s unless block ~ ~ ~ air if block ~ ~ ~0.15 air run tp @s ~ ~ ~0.6
execute as @s[nbt={FireworksItem:{id:"minecraft:firework_rocket",tag:{CustomModelData:8,CustomBlock0:1b}}}] at @s unless block ~ ~ ~ air if block ~ ~-0.15 ~ air run tp @s ~ ~-0.6 ~
execute as @s[nbt={FireworksItem:{id:"minecraft:firework_rocket",tag:{CustomModelData:8,CustomBlock0:1b}}}] at @s unless block ~ ~ ~ air if block ~ ~0.15 ~ air run tp @s ~ ~0.6 ~
#################(Here I tried detecting when placing a firework on the sides of non-full blocks but chests work tho)
execute as @s[nbt={FireworksItem:{id:"minecraft:firework_rocket",tag:{CustomModelData:8,CustomBlock0:1b}}}] at @s align xyz positioned ~.5 ~ ~.5 unless block ~ ~ ~ air if block ~0.3 ~ ~ air run tp @s ~0.8 ~ ~
execute as @s[nbt={FireworksItem:{id:"minecraft:firework_rocket",tag:{CustomModelData:8,CustomBlock0:1b}}}] at @s align xyz positioned ~.5 ~ ~.5 unless block ~ ~ ~ air if block ~-0.3 ~ ~ air run tp @s ~-0.8 ~ ~
execute as @s[nbt={FireworksItem:{id:"minecraft:firework_rocket",tag:{CustomModelData:8,CustomBlock0:1b}}}] at @s align xyz positioned ~.5 ~ ~.5 unless block ~ ~ ~ air if block ~ ~ ~-0.3 air run tp @s ~ ~ ~-0.8
execute as @s[nbt={FireworksItem:{id:"minecraft:firework_rocket",tag:{CustomModelData:8,CustomBlock0:1b}}}] at @s align xyz positioned ~.5 ~ ~.5 unless block ~ ~ ~ air if block ~ ~ ~0.3 air run tp @s ~ ~ ~0.8
execute as @s[nbt={FireworksItem:{id:"minecraft:firework_rocket",tag:{CustomModelData:8,CustomBlock0:1b}}}] at @s align xyz positioned ~.5 ~ ~.5 unless block ~ ~ ~ air if block ~ ~-0.3 ~ air run tp @s ~ ~-0.8 ~
execute as @s[nbt={FireworksItem:{id:"minecraft:firework_rocket",tag:{CustomModelData:8,CustomBlock0:1b}}}] at @s align xyz positioned ~.5 ~ ~.5 unless block ~ ~ ~ air if block ~ ~0.3 ~ air run tp @s ~ ~0.8 ~
#setting a block at the centered postion of the firework entity/summoning an armor stand at the centered position of the firework entity
execute as @s[type=minecraft:firework_rocket] store result entity @s Rotation[0] float 1 run data get entity @p Rotation[0] 1
execute as @s[nbt={FireworksItem:{id:"minecraft:firework_rocket",tag:{CustomModelData:8,CustomBlock0:1b}}}] at @s align xyz if block ~ ~ ~ air positioned ~.5 ~ ~.5 run setblock ~ ~ ~ minecraft:chest[type=left]{CustomName:"{\"text\":\"toy_crafter\"}"}
execute as @s[y_rotation=135.1..180,nbt={FireworksItem:{id:"minecraft:firework_rocket",tag:{CustomModelData:8,CustomBlock0:1b}}}] at @s align xyz if block ~ ~ ~ chest[type=left]{CustomName:"{\"text\":\"toy_crafter\"}"} positioned ~.5 ~ ~.5 run summon armor_stand ~ ~ ~ {NoGravity:1b,Small:1b,Invulnerable:1b,Invisible:1b,NoBasePlate:0b,Tags:["CustomBlock0"],DisabledSlots:4144896,ArmorItems:[{},{},{},{id:"minecraft:firework_rocket",Count:1b,tag:{CustomModelData:8}}]}
execute as @s[y_rotation=-180..-135.1,nbt={FireworksItem:{id:"minecraft:firework_rocket",tag:{CustomModelData:8,CustomBlock0:1b}}}] at @s align xyz if block ~ ~ ~ chest[type=left]{CustomName:"{\"text\":\"toy_crafter\"}"} positioned ~.5 ~ ~.5 run summon armor_stand ~ ~ ~ {NoGravity:1b,Small:1b,Invulnerable:1b,Invisible:1b,NoBasePlate:0b,Tags:["CustomBlock0"],DisabledSlots:4144896,ArmorItems:[{},{},{},{id:"minecraft:firework_rocket",Count:1b,tag:{CustomModelData:8}}]}
execute as @s[y_rotation=-135..-45.1,nbt={FireworksItem:{id:"minecraft:firework_rocket",tag:{CustomModelData:8,CustomBlock0:1b}}}] at @s align xyz if block ~ ~ ~ chest[type=left]{CustomName:"{\"text\":\"toy_crafter\"}"} positioned ~.5 ~ ~.5 run summon armor_stand ~ ~ ~ {NoGravity:1b,Small:1b,Invulnerable:1b,Invisible:1b,NoBasePlate:0b,Tags:["CustomBlock0"],DisabledSlots:4144896,ArmorItems:[{},{},{},{id:"minecraft:firework_rocket",Count:1b,tag:{CustomModelData:8}}],Rotation:[90f,0f]}
execute as @s[y_rotation=-45..-0,nbt={FireworksItem:{id:"minecraft:firework_rocket",tag:{CustomModelData:8,CustomBlock0:1b}}}] at @s align xyz if block ~ ~ ~ chest[type=left]{CustomName:"{\"text\":\"toy_crafter\"}"} positioned ~.5 ~ ~.5 run summon armor_stand ~ ~ ~ {NoGravity:1b,Small:1b,Invulnerable:1b,Invisible:1b,NoBasePlate:0b,Tags:["CustomBlock0"],DisabledSlots:4144896,ArmorItems:[{},{},{},{id:"minecraft:firework_rocket",Count:1b,tag:{CustomModelData:8}}],Rotation:[180f,0f]}
execute as @s[y_rotation=0..45,nbt={FireworksItem:{id:"minecraft:firework_rocket",tag:{CustomModelData:8,CustomBlock0:1b}}}] at @s align xyz if block ~ ~ ~ chest[type=left]{CustomName:"{\"text\":\"toy_crafter\"}"} positioned ~.5 ~ ~.5 run summon armor_stand ~ ~ ~ {NoGravity:1b,Small:1b,Invulnerable:1b,Invisible:1b,NoBasePlate:0b,Tags:["CustomBlock0"],DisabledSlots:4144896,ArmorItems:[{},{},{},{id:"minecraft:firework_rocket",Count:1b,tag:{CustomModelData:8}}],Rotation:[180f,0f]}
execute as @s[y_rotation=45.1..135,nbt={FireworksItem:{id:"minecraft:firework_rocket",tag:{CustomModelData:8,CustomBlock0:1b}}}] at @s align xyz if block ~ ~ ~ chest[type=left]{CustomName:"{\"text\":\"toy_crafter\"}"} positioned ~.5 ~ ~.5 run summon armor_stand ~ ~ ~ {NoGravity:1b,Small:1b,Invulnerable:1b,Invisible:1b,NoBasePlate:0b,Tags:["CustomBlock0"],DisabledSlots:4144896,ArmorItems:[{},{},{},{id:"minecraft:firework_rocket",Count:1b,tag:{CustomModelData:8}}],Rotation:[-90f,0f]}
#killing the firework
kill @s[nbt={FireworksItem:{id:"minecraft:firework_rocket",tag:{CustomModelData:8,CustomBlock0:1b}}}]
